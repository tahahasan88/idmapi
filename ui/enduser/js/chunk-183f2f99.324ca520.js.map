{"version":3,"sources":["webpack:///./src/components/profile/index.vue?d6cd","webpack:///src/components/profile/index.vue","webpack:///./src/components/profile/index.vue?b660","webpack:///./src/components/profile/index.vue?6165","webpack:///./src/components/profile/index.vue?3dcd"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","fullName","email","$root","userStore","state","internalUser","directives","name","rawName","modifiers","ref","$t","_e","openProfile","schema","profile","on","updateProfile","updateKBA","clientToken","linkedProvider","consentedMappings","staticRenderFns","props","required","default","components","computed","methods","payload","config","makeUpdateRequest","endpoint","userId","selfServiceInstance","headers","catch","component"],"mappings":"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","file":"js/chunk-183f2f99.324ca520.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',[_c('b-row',{staticClass:\"my-5\"},[_c('b-col',{staticClass:\"profileCol mb-4\",attrs:{\"lg\":\"4\"}},[_c('b-card',{staticClass:\"text-center mb-4\"},[_c('b-img',{staticClass:\"m-1 mb-3\",attrs:{\"src\":require('@/assets/images/profile-default.png'),\"rounded\":\"circle\",\"width\":\"112\",\"height\":\"112\",\"alt\":\"img\"}}),_c('h4',{staticClass:\"text-truncate\"},[_vm._v(_vm._s(_vm.fullName))]),_c('div',{staticClass:\"text-muted text-truncate\"},[_vm._v(_vm._s(_vm.email))]),(_vm.$root.userStore.state.internalUser === false)?_c('b-button',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.userDetailsModal\",modifiers:{\"userDetailsModal\":true}}],ref:\"editProfileButton\",staticClass:\"mt-4\",attrs:{\"variant\":\"primary\",\"block\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.$t('pages.profile.editPersonalInfo'))+\" \")]):_vm._e()],1),_c('fr-edit-personal-info',{attrs:{\"autoOpen\":_vm.openProfile,\"schema\":_vm.schema,\"profile\":_vm.profile},on:{\"updateProfile\":_vm.updateProfile}})],1),_c('b-col',{attrs:{\"lg\":\"8\"}},[_c('b-tabs',{attrs:{\"content-class\":\"mt-4\"}},[_c('b-tab',{attrs:{\"title\":_vm.$t('pages.profile.settings'),\"active\":\"\"}},[_c('fr-account-security',{on:{\"updateProfile\":_vm.updateProfile,\"updateKBA\":_vm.updateKBA}}),(_vm.$root.userStore.state.internalUser === false)?_c('fr-social-identities',{attrs:{\"clientToken\":_vm.clientToken,\"linkedProvider\":_vm.linkedProvider}}):_vm._e(),(_vm.$root.userStore.state.internalUser === false)?_c('fr-preferences',{on:{\"updateProfile\":_vm.updateProfile}}):_vm._e(),(_vm.$root.userStore.state.internalUser === false)?_c('fr-consent',{attrs:{\"consentedMappings\":_vm.profile.consentedMappings},on:{\"updateProfile\":_vm.updateProfile}}):_vm._e(),_c('fr-account-controls')],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n    <b-container>\n        <b-row class=\"my-5\" >\n            <b-col class=\"profileCol mb-4\" lg=\"4\">\n                <b-card class=\"text-center mb-4\">\n                    <b-img :src=\"require('@/assets/images/profile-default.png')\" rounded=\"circle\" width=\"112\" height=\"112\" alt=\"img\" class=\"m-1 mb-3\" />\n                    <h4 class=\"text-truncate\">{{fullName}}</h4>\n                    <div class=\"text-muted text-truncate\">{{email}}</div>\n                    <b-button v-if=\"$root.userStore.state.internalUser === false\" ref=\"editProfileButton\" variant=\"primary\" block class=\"mt-4\" v-b-modal.userDetailsModal>\n                        {{$t('pages.profile.editPersonalInfo')}}\n                    </b-button>\n                </b-card>\n\n                <fr-edit-personal-info :autoOpen=\"openProfile\" @updateProfile=\"updateProfile\" :schema=\"schema\" :profile=\"profile\"></fr-edit-personal-info>\n            </b-col>\n            <b-col lg=\"8\">\n                <b-tabs content-class=\"mt-4\">\n                    <b-tab :title=\"$t('pages.profile.settings')\" active>\n                        <fr-account-security @updateProfile=\"updateProfile\" @updateKBA=\"updateKBA\"></fr-account-security>\n                        <fr-social-identities v-if=\"$root.userStore.state.internalUser === false\" :clientToken=\"clientToken\" :linkedProvider=\"linkedProvider\"></fr-social-identities>\n                        <fr-preferences v-if=\"$root.userStore.state.internalUser === false\" @updateProfile=\"updateProfile\"></fr-preferences>\n                        <fr-consent v-if=\"$root.userStore.state.internalUser === false\" :consentedMappings=\"profile.consentedMappings\" @updateProfile=\"updateProfile\"></fr-consent>\n                        <fr-account-controls></fr-account-controls>\n                    </b-tab>\n                </b-tabs>\n            </b-col>\n        </b-row>\n    </b-container>\n</template>\n\n<script>\nimport _ from 'lodash';\n/**\n * @description Controlling component for profile management (changing password, KBA, edit profile, social management etc.)\n *\n * @fires PATCH type/name/id (e.g. managed/user/_id) - Submits a patch object of changes for the provided resource record\n */\nexport default {\n    name: 'Profile',\n    props: {\n        'clientToken': String,\n        'linkedProvider': String,\n        'openProfile': {\n            required: false,\n            default: false\n        }\n    },\n    components: {\n        'fr-account-controls': () => import('@/components/profile/AccountControls'),\n        'fr-account-security': () => import('@/components/profile/AccountSecurity'),\n        'fr-edit-personal-info': () => import('@/components/profile/EditPersonalInfo'),\n        'fr-preferences': () => import('@/components/profile/Preferences'),\n        'fr-consent': () => import('@/components/profile/Consent'),\n        'fr-social-identities': () => import('@/components/profile/SocialIdentities')\n    },\n    computed: {\n        fullName () {\n            let fullName = '';\n\n            if (this.$root.userStore.state.givenName.length > 0 || this.$root.userStore.state.sn.length > 0) {\n                fullName = _.startCase(this.$root.userStore.state.givenName + ' ' + this.$root.userStore.state.sn);\n            } else {\n                fullName = this.$root.userStore.state.userId;\n            }\n\n            return fullName;\n        },\n        email () {\n            return this.$root.userStore.state.email;\n        },\n        profile () {\n            return this.$root.userStore.state.profile;\n        },\n        schema () {\n            return this.$root.userStore.state.schema;\n        }\n    },\n    methods: {\n        updateProfile (payload, config = {}) {\n            this.makeUpdateRequest(this.$root.userStore.state.managedResource, payload, config);\n        },\n        updateKBA (payload, config) {\n            this.makeUpdateRequest('selfservice/user', payload, config);\n        },\n        makeUpdateRequest (endpoint, payload, config = {}) {\n            /* istanbul ignore next */\n            let successMsg = config.successMsg || this.$t('common.user.profile.updateSuccess'),\n                userId = this.$root.userStore.state.userId,\n                selfServiceInstance = this.getRequestService({\n                    headers: config.headers\n                });\n\n            /* istanbul ignore next */\n            selfServiceInstance.patch(`${endpoint}/${userId}`, payload).then((response) => {\n                this.$root.userStore.setProfileAction(response.data);\n                this.displayNotification('success', successMsg);\n\n                if (config.onSuccess) {\n                    config.onSuccess();\n                }\n            })\n                .catch((error) => {\n                    /* istanbul ignore next */\n                    let errorMsg = config.errorMsg || error.response.data.message;\n                    this.displayNotification('error', errorMsg);\n\n                    if (config.onError) {\n                        config.onError(error);\n                    }\n                });\n        }\n    }\n};\n</script>\n<style type=\"scss\" scoped>\n    /deep/ .nav-tabs {\n        border-bottom: 1px solid rgba(0, 0, 0, 0.125);\n    }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=73a09163&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=73a09163&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"73a09163\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=73a09163&scoped=true&lang=css&\""],"sourceRoot":""}