{"version":3,"sources":["webpack:///./src/components/selfservice/passwordreset/index.vue?65c6","webpack:///./src/components/selfservice/common/EmailValidation.vue?ba7f","webpack:///src/components/selfservice/common/EmailValidation.vue","webpack:///./src/components/selfservice/common/EmailValidation.vue?1747","webpack:///./src/components/selfservice/common/EmailValidation.vue","webpack:///./src/components/selfservice/passwordreset/KbaVerification.vue?5ed3","webpack:///src/components/selfservice/passwordreset/KbaVerification.vue","webpack:///./src/components/selfservice/passwordreset/KbaVerification.vue?c989","webpack:///./src/components/selfservice/passwordreset/KbaVerification.vue","webpack:///./src/components/selfservice/passwordreset/ResetStage.vue?9ca1","webpack:///src/components/selfservice/passwordreset/ResetStage.vue","webpack:///./src/components/selfservice/passwordreset/ResetStage.vue?ff18","webpack:///./src/components/selfservice/passwordreset/ResetStage.vue","webpack:///src/components/selfservice/passwordreset/index.vue","webpack:///./src/components/selfservice/passwordreset/index.vue?75eb","webpack:///./src/components/selfservice/passwordreset/index.vue","webpack:///./src/components/selfservice/common/UserQuery.vue?5c33","webpack:///src/components/selfservice/common/UserQuery.vue","webpack:///./src/components/selfservice/common/UserQuery.vue?549b","webpack:///./src/components/selfservice/common/UserQuery.vue","webpack:///./src/components/selfservice/common/Captcha.vue?79e0","webpack:///src/components/selfservice/common/Captcha.vue","webpack:///./src/components/selfservice/common/Captcha.vue?3a12","webpack:///./src/components/selfservice/common/Captcha.vue","webpack:///./src/components/selfservice/common/GenericSelfService.vue?f9cd","webpack:///src/components/selfservice/common/GenericSelfService.vue","webpack:///./src/components/selfservice/common/GenericSelfService.vue?951d","webpack:///./src/components/selfservice/common/GenericSelfService.vue","webpack:///./src/components/utils/PolicyPasswordInput.vue?e11a","webpack:///./src/components/utils/PolicyPanel.vue?783e","webpack:///src/components/utils/PolicyPanel.vue","webpack:///./src/components/utils/PolicyPanel.vue?2076","webpack:///./src/components/utils/PolicyPanel.vue","webpack:///src/components/utils/PolicyPasswordInput.vue","webpack:///./src/components/utils/PolicyPasswordInput.vue?c6c5","webpack:///./src/components/utils/PolicyPasswordInput.vue","webpack:///./src/components/utils/PolicyPanel.vue?9dbc"],"names":["render","_vm","this","_h","$createElement","_c","_self","selfServiceType","attrs","slot","staticClass","_v","_s","$t","ref","tag","selfServiceDetails","apiType","on","advanceStage","loadingColor","staticRenderFns","name","props","required","component","$event","type","indexOf","_k","keyCode","key","save","preventDefault","_l","value","questionText","scopedSlots","_u","fn","validationContext","refInFor","model","answers","callback","$$v","$set","trim","expression","errors","$tc","requirements","length","components","data","properties","methods","emitData","getData","isValid","error","defaultPolicyFailures","password","reloadPage","event","window","watch","handler","val","property","errorMessage","deep","Captcha","EmailValidation","UserQuery","ResetStage","kbaSecurityAnswerVerificationStage","GenericSelfService","mounted","setChildComponent","details","_","stageCheck","apiErrorCallback","mixins","SelfserviceAPI","mail","queryFilter","_e","_m","created","recaptchaScript","document","loadRecaptcha","setTimeout","sitekey","handleCaptchaCallback","response","field","index","_f","text","saveFields","_n","displayDetails","saveData","filters","startCase","_t","label","setFailingPolicies","cols","policies","failedPolicies","i","policyColumns","policy","policyId","class","includes","policyFailures","params","numColumns","default","computed","numPolicies","getPolicyColumns","policyList","policiesPerColumn","remaining","curColumnIndex","immediate","excludeOverwrite","failed","userPolicyObject","policyApi","policyService","serverFailures","newVal","exclude","predicate","policyRequirements","isPasswordPolicyItem","toSimplePolicyObject","policyDefinition","first","toPolicyNames","failedPolicySet","policyNames","filter","map","makeExclusions","policyRequirementSet","getFailedPolicyMessages","param","sentPassword","user","then","catch","headers"],"mappings":"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","file":"js/chunk-9e31597a.9a691490.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.selfServiceType !== null && _vm.selfServiceType !== 'parameters')?_c('fr-center-card',{attrs:{\"showLogo\":true}},[_c('div',{attrs:{\"slot\":\"center-card-header\"},slot:\"center-card-header\"},[_c('h2',{staticClass:\"h2\"},[_vm._v(_vm._s(_vm.$t(\"pages.selfservice.headers.reset.title\")))])]),_c('b-card-body',{attrs:{\"slot\":\"center-card-body\"},slot:\"center-card-body\"},[_c(_vm.selfServiceType,{ref:\"selfServiceStage\",tag:\"component\",attrs:{\"selfServiceDetails\":_vm.selfServiceDetails,\"apiType\":_vm.apiType},on:{\"advanceStage\":_vm.advanceStage}})],1),_c('b-card-footer',{attrs:{\"slot\":\"center-card-footer\"},slot:\"center-card-footer\"},[_c('b-link',{attrs:{\"href\":\"#/login\"}},[_vm._v(_vm._s(_vm.$t(\"pages.selfservice.signIn\")))])],1)],1):_c('b-container',{staticClass:\"h-100 px-0\",attrs:{\"fluid\":\"\"}},[_c('div',{staticClass:\"h-100 d-flex\"},[_c('div',{staticClass:\"m-auto fr-center-card\"},[_c('bounce-loader',{attrs:{\"color\":_vm.loadingColor}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-alert',{attrs:{\"show\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.$t((\"pages.selfservice.headers.\" + _vm.apiType + \".emailSent\")))+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n    <b-alert show>\n        {{$t(`pages.selfservice.headers.${apiType}.emailSent`)}}\n    </b-alert>\n</template>\n\n<script>\n/**\n * @description Selfservice stage for multiple selfservice flows, displays a email sent message\n *\n **/\nexport default {\n    name: 'Email-Validation',\n    props: {\n        apiType: { required: true }\n    }\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmailValidation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmailValidation.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EmailValidation.vue?vue&type=template&id=67515a49&\"\nimport script from \"./EmailValidation.vue?vue&type=script&lang=js&\"\nexport * from \"./EmailValidation.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ValidationObserver',{ref:\"observer\",attrs:{\"slim\":\"\"}},[_c('b-form',{on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.save($event)},\"submit\":function($event){$event.preventDefault();}}},[_c('p',{staticClass:\"text-center mb-4\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"pages.selfservice.passwordReset.kbaVerificationStageDescription\"))+\" \")]),_vm._l((_vm.answers),function(value,key){return _c('div',{key:key,staticClass:\"form-group text-left\"},[_c('ValidationProvider',{attrs:{\"rules\":\"required\",\"name\":_vm.questionText[key],\"vid\":key},scopedSlots:_vm._u([{key:\"default\",fn:function(validationContext){return [_c('label',{staticClass:\"col-form-label pt-0 pb-2\",attrs:{\"for\":key}},[_vm._v(_vm._s(_vm.questionText[key]))]),_c('b-form-input',{key:key,ref:key,refInFor:true,attrs:{\"autofocus\":true,\"name\":key,\"id\":key},model:{value:(_vm.answers[key]),callback:function ($$v) {_vm.$set(_vm.answers, key, (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"answers[key]\"}}),_c('b-form-invalid-feedback',[_vm._v(_vm._s(validationContext.errors[0]))])]}}],null,true)})],1)}),_c('b-button',{attrs:{\"block\":true,\"size\":\"lg\",\"variant\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\" \"+_vm._s(_vm.$tc('common.user.kba.submitAnswers', _vm.selfServiceDetails.requirements.required.length))+\" \")])],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n    <ValidationObserver ref=\"observer\" slim>\n        <b-form @keyup.enter=\"save\" @submit.prevent>\n            <p class='text-center mb-4'>\n                {{$t(`pages.selfservice.passwordReset.kbaVerificationStageDescription`)}}\n            </p>\n            <div class=\"form-group text-left\"\n                v-for=\"(value, key) in answers\"\n                :key=\"key\">\n                <ValidationProvider rules=\"required\" :name=\"questionText[key]\" :vid=\"key\" v-slot=\"validationContext\">\n                    <label class=\"col-form-label pt-0 pb-2\" :for=\"key\">{{questionText[key]}}</label>\n\n                    <b-form-input :ref=\"key\" :key=\"key\" :autofocus=\"true\" :name=\"key\" :id=\"key\"  v-model.trim=\"answers[key]\" />\n                    <b-form-invalid-feedback>{{ validationContext.errors[0] }}</b-form-invalid-feedback>\n                </ValidationProvider>\n            </div>\n\n            <b-button @click=\"save\" :block=\"true\" size=\"lg\" variant=\"primary\">\n                {{$tc('common.user.kba.submitAnswers', selfServiceDetails.requirements.required.length)}}\n            </b-button>\n\n        </b-form>\n    </ValidationObserver>\n</template>\n\n<script>\nimport _ from 'lodash';\n\n/**\n * @description Selfservice stage for password reset, handles securing a users password change with verifying KBA answers\n *\n **/\nexport default {\n    name: 'Kba-Verification',\n    components: {},\n    props: {\n        selfServiceDetails: { required: true }\n    },\n    data () {\n        let { locale, fallbackLocale } = this.$i18n,\n            { properties, required } = this.selfServiceDetails.requirements;\n\n        return {\n            questionText: _.mapValues(properties, (value) => {\n                if (_.has(value, 'systemQuestion')) {\n                    let question = value.systemQuestion[locale] || value.systemQuestion[fallbackLocale];\n                    return question;\n                }\n\n                if (_.has(value, 'userQuestion')) {\n                    return value.userQuestion;\n                }\n            }),\n            answers: required.reduce((acc, answer) => _.set(acc, answer, ''), {})\n        };\n    },\n    methods: {\n        emitData () {\n            this.$emit('advanceStage', this.getData());\n        },\n        getData () {\n            return this.answers;\n        },\n        isValid () {\n            /* istanbul ignore next */\n            return this.$refs.observer.validate();\n        },\n        save () {\n            /* istanbul ignore next */\n            this.isValid().then((valid) => {\n                if (valid) {\n                    this.emitData();\n                }\n            });\n        }\n    }\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./KbaVerification.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./KbaVerification.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./KbaVerification.vue?vue&type=template&id=7ce9364e&\"\nimport script from \"./KbaVerification.vue?vue&type=script&lang=js&\"\nexport * from \"./KbaVerification.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.selfServiceDetails.tag ==='end')?_c('div',[_c('b-alert',{attrs:{\"show\":\"\"}},[_c('p',[_vm._v(_vm._s(_vm.$t('pages.selfservice.passwordReset.successMessage')))])])],1):(typeof _vm.selfServiceDetails.error !== 'string')?_c('div',[_c('b-form',{on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.save($event)},\"submit\":function($event){$event.preventDefault();}}},[_c('fr-policy-password-input',{attrs:{\"defaultPolicyFailures\":_vm.defaultPolicyFailures,\"policyApi\":\"selfservice/reset\",\"name\":\"password\",\"label\":_vm.$t('pages.selfservice.passwordReset.newPassword')},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('b-button',{attrs:{\"block\":true,\"size\":\"lg\",\"variant\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\" \"+_vm._s(_vm.$t(\"pages.selfservice.passwordReset.changePassword\"))+\" \")])],1)],1):_c('div',[_c('b-alert',{attrs:{\"variant\":\"danger\",\"show\":\"\"}},[_c('b',[_vm._v(_vm._s(_vm.$t('pages.selfservice.passwordReset.errorMessage')))]),_c('p',[_vm._v(_vm._s(_vm.selfServiceDetails.error))])]),_c('div',{staticClass:\"mt-2\"},[_c('a',{attrs:{\"href\":\"#/passwordreset\"},on:{\"click\":_vm.reloadPage}},[_vm._v(_vm._s(_vm.$t(\"pages.selfservice.passwordReset.tryAgain\")))])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n    <div v-if=\"selfServiceDetails.tag ==='end'\">\n        <b-alert show>\n            <p>{{$t('pages.selfservice.passwordReset.successMessage')}}</p>\n        </b-alert>\n    </div>\n    <div v-else-if=\"typeof selfServiceDetails.error !== 'string'\">\n        <b-form @keyup.enter=\"save\" @submit.prevent>\n                <fr-policy-password-input :defaultPolicyFailures=\"defaultPolicyFailures\" policyApi=\"selfservice/reset\" v-model=\"password\" name=\"password\" :label=\"$t('pages.selfservice.passwordReset.newPassword')\" ></fr-policy-password-input>\n            <b-button @click=\"save\" :block=\"true\" size=\"lg\" variant=\"primary\">\n                {{$t(\"pages.selfservice.passwordReset.changePassword\")}}\n            </b-button>\n        </b-form>\n    </div>\n    <div v-else>\n        <b-alert variant=\"danger\" show>\n            <b>{{$t('pages.selfservice.passwordReset.errorMessage')}}</b>\n            <p>{{selfServiceDetails.error}}</p>\n        </b-alert>\n        <div class=\"mt-2\">\n            <a href=\"#/passwordreset\" v-on:click=\"reloadPage\">{{$t(\"pages.selfservice.passwordReset.tryAgain\")}}</a>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { has, find, map } from 'lodash';\nimport PolicyPasswordInput from '@/components/utils/PolicyPasswordInput';\n\n/**\n* @description Selfservice stage for password reset, handles the final result of password reset, either displaying an error or that the reset has been complete\n*\n**/\nexport default {\n    name: 'Reset-Stage',\n    components: {\n        'fr-policy-password-input': PolicyPasswordInput\n    },\n    props: {\n        selfServiceDetails: { required: true }\n    },\n    data () {\n        return {\n            password: '',\n            defaultPolicyFailures: null\n        };\n    },\n    methods: {\n        getData () {\n            return {\n                password: this.password\n            };\n        },\n        save () {\n            this.$emit('advanceStage', this.getData());\n        },\n        reloadPage (event) {\n            event.preventDefault();\n            let hash = window.location.hash;\n\n            // remove any `code` after last foward slash in url\n            window.location.hash = hash.substr(0, hash.lastIndexOf('/') + 1);\n            window.location.reload();\n        }\n    },\n    watch: {\n        selfServiceDetails: {\n            handler (val) {\n                /*\n                    If there is a change to selfServiceDetails it's probably because of a\n                    policy failure on password that could not be handled on the fly with\n                    \"?_action=validateObject\". Look for those failures here and send them to the\n                    PolicyPasswordInput via it's defaultPolicyFailures property.\n                */\n                if (has(val, 'requirements.error.detail.failedPolicyRequirements')) {\n                    let failedPolicy = find(val.requirements.error.detail.failedPolicyRequirements, { property: 'password' });\n\n                    if (failedPolicy && failedPolicy.policyRequirements) {\n                        let policyError = this.$t(`common.policyValidationMessages.${failedPolicy.policyRequirements[0].policyRequirement}`, failedPolicy.policyRequirements[0].params),\n                            errorMessage = `${this.$t(`common.policyValidationMessages.policyValidationFailed`, { property: failedPolicy.property })}: ${policyError}`;\n\n                        /* istanbul ignore next */\n                        this.displayNotification('error', errorMessage);\n\n                        this.defaultPolicyFailures = map(failedPolicy.policyRequirements, 'policyRequirement');\n                    }\n                }\n            },\n            deep: true\n        }\n    }\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResetStage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResetStage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ResetStage.vue?vue&type=template&id=607e1124&\"\nimport script from \"./ResetStage.vue?vue&type=script&lang=js&\"\nexport * from \"./ResetStage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n    <fr-center-card v-if=\"selfServiceType !== null && selfServiceType !== 'parameters'\" :showLogo=\"true\">\n        <div slot=\"center-card-header\">\n            <h2 class=\"h2\">{{$t(`pages.selfservice.headers.reset.title`)}}</h2>\n        </div>\n\n        <b-card-body slot=\"center-card-body\">\n            <component ref=\"selfServiceStage\"\n                :is=\"selfServiceType\"\n                :selfServiceDetails=\"selfServiceDetails\"\n                @advanceStage=\"advanceStage\"\n                :apiType=\"apiType\">\n            </component>\n        </b-card-body>\n\n        <b-card-footer slot=\"center-card-footer\">\n            <b-link href=\"#/login\">{{$t(\"pages.selfservice.signIn\")}}</b-link>\n        </b-card-footer>\n    </fr-center-card>\n\n    <b-container fluid class=\"h-100 px-0\"  v-else>\n        <div class=\"h-100 d-flex\">\n            <div class=\"m-auto fr-center-card\">\n                <bounce-loader :color=\"loadingColor\"></bounce-loader>\n            </div>\n        </div>\n    </b-container>\n</template>\n\n<script>\nimport _ from 'lodash';\nimport { BounceLoader } from 'vue-spinner/dist/vue-spinner.min.js';\nimport styles from '@/scss/main.scss';\nimport CenterCard from '@/components/utils/CenterCard';\nimport Captcha from '@/components/selfservice/common/Captcha';\nimport EmailValidation from '@/components/selfservice/common/EmailValidation';\nimport KbaVerification from '@/components/selfservice/passwordreset/KbaVerification';\nimport GenericSelfService from '@/components/selfservice/common/GenericSelfService';\nimport ResetStage from '@/components/selfservice/passwordreset/ResetStage';\nimport SelfserviceAPI from '@/components/selfservice/mixins/SelfserviceAPIMixin';\nimport UserQuery from '@/components/selfservice/common/UserQuery';\n\n/**\n * @description Selfservice controlling component for recovering a lost password. Makes use of selfservice-reset.json config file.\n *\n * @mixin - selfservice/mixins/SelfserviceAPIMixin.vue\n */\nexport default {\n    name: 'Password-Reset',\n    components: {\n        Captcha,\n        EmailValidation,\n        UserQuery,\n        ResetStage,\n        kbaSecurityAnswerVerificationStage: KbaVerification,\n        GenericSelfService,\n        'bounce-loader': BounceLoader,\n        'fr-center-card': CenterCard\n    },\n    data () {\n        return {\n            selfServiceType: null,\n            selfServiceDetails: null,\n            loadingColor: styles.baseColor,\n            apiType: 'reset'\n        };\n    },\n    mounted () {\n        /* istanbul ignore next */\n        if (this.$route.params.queryParams) {\n            let queryParams = this.parseQueryParams(this.$route.params.queryParams);\n\n            this.advanceStage(queryParams);\n        } else {\n            this.loadData();\n        }\n    },\n    methods: {\n        setChildComponent (type, details) {\n            this.selfServiceDetails = details;\n\n            if (type === 'parameters') {\n                this.selfServiceType = null;\n                this.advanceStage({});\n            } else {\n                let stageCheck = false;\n\n                _.each(this.$options.components, (value, key) => {\n                    if (_.toLower(key) === _.toLower(type)) {\n                        stageCheck = true;\n                    }\n                });\n\n                if (stageCheck) {\n                    this.selfServiceType = type;\n                } else {\n                    this.selfServiceType = 'GenericSelfService';\n                }\n            }\n        },\n        apiErrorCallback (error) {\n            this.setChildComponent('resetStage', { error: error.response.data.message });\n        }\n    },\n    mixins: [\n        SelfserviceAPI\n    ]\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6780764e&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-form',{on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.save($event)},\"submit\":function($event){$event.preventDefault();}}},[_c('p',{staticClass:\"text-center mb-4\"},[_vm._v(\" \"+_vm._s(_vm.$t('pages.selfservice.passwordReset.userQuery'))+\" \")]),_c('b-form-group',[_c('fr-floating-label-input',{attrs:{\"fieldName\":\"mail\",\"label\":_vm.$t('common.placeholders.emailAddress'),\"type\":\"text\",\"autofocus\":\"true\"},model:{value:(_vm.mail),callback:function ($$v) {_vm.mail=$$v},expression:\"mail\"}})],1),_c('b-button',{attrs:{\"size\":\"lg\",\"block\":true,\"variant\":\"primary\"},on:{\"click\":_vm.save}},[(_vm.apiType === 'username')?_c('div',[_vm._v(\" \"+_vm._s(_vm.$t(\"pages.selfservice.forgotUsername.advanceStageButtonText\"))+\" \")]):_c('div',[_vm._v(\" \"+_vm._s(_vm.$t(\"pages.selfservice.passwordReset.advanceStageButtonText\"))+\" \")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n    <b-form @keyup.enter=\"save\" @submit.prevent>\n        <p class='text-center mb-4'>\n            {{$t('pages.selfservice.passwordReset.userQuery')}}\n        </p>\n        <b-form-group>\n            <fr-floating-label-input v-model=\"mail\" fieldName=\"mail\" :label=\"$t('common.placeholders.emailAddress')\" type=\"text\" autofocus=\"true\"></fr-floating-label-input>\n        </b-form-group>\n\n        <b-button @click=\"save\" size=\"lg\" :block=\"true\" variant=\"primary\">\n            <div v-if=\"apiType === 'username'\">\n                {{$t(\"pages.selfservice.forgotUsername.advanceStageButtonText\")}}\n            </div>\n            <div v-else>\n                {{$t(\"pages.selfservice.passwordReset.advanceStageButtonText\")}}\n            </div>\n        </b-button>\n    </b-form>\n</template>\n\n<script>\nimport FloatingLabelInput from '@/components/utils/FloatingLabelInput';\n\n/**\n * @description Selfservice stage for multiple selfservice flows, typically used with an email to locate a user in the system to continue on with further\n * selfservice stages\n *\n **/\nexport default {\n    name: 'User-Query',\n    components: {\n        'fr-floating-label-input': FloatingLabelInput\n    },\n    props: {\n        apiType: { required: true }\n    },\n    data () {\n        return {\n            mail: ''\n        };\n    },\n    methods: {\n        getData () {\n            return {\n                queryFilter: `mail eq \"${this.mail}\"`\n            };\n        },\n        save () {\n            /* istanbul ignore next */\n            this.$emit('advanceStage', this.getData());\n        }\n    }\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserQuery.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserQuery.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserQuery.vue?vue&type=template&id=0c9dad52&\"\nimport script from \"./UserQuery.vue?vue&type=script&lang=js&\"\nexport * from \"./UserQuery.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mb-4\",attrs:{\"id\":\"captchaBody\"}},[(_vm.apiType)?_c('p',{staticClass:\"text-center mb-4\"},[_vm._v(\" \"+_vm._s(_vm.$t((\"pages.selfservice.headers.\" + _vm.apiType + \".description\")))+\" \")]):_vm._e(),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"recaptcha-wrapper \"},[_c('div',{staticClass:\"recaptcha-bound\"},[_c('div',{attrs:{\"id\":\"recaptchaContainer\"}})])])}]\n\nexport { render, staticRenderFns }","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n    <div id=\"captchaBody\" class=\"mb-4\">\n        <p class='text-center mb-4' v-if=\"apiType\">\n            {{$t(`pages.selfservice.headers.${apiType}.description`)}}\n        </p>\n        <div class=\"recaptcha-wrapper \">\n            <div class=\"recaptcha-bound\">\n                <div id=\"recaptchaContainer\"></div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n/**\n * @description Selfservice stage for multiple selfservice flows, displays a google captcha\n *\n **/\nimport _ from 'lodash';\n\nexport default {\n    name: 'Captcha',\n    props: {\n        advanceStage: { required: false },\n        selfServiceDetails: { required: true },\n        apiType: { required: false }\n    },\n    created () {\n        let recaptchaScript = document.createElement('script');\n\n        recaptchaScript.setAttribute('src', 'https://www.google.com/recaptcha/api.js');\n        document.head.appendChild(recaptchaScript);\n    },\n    mounted () {\n        this.loadRecaptcha();\n    },\n    methods: {\n        loadRecaptcha () {\n            /* istanbul ignore next */\n            if (_.isUndefined(this.selfServiceDetails.requirements.properties.response.recaptchaSiteKey) || this.selfServiceDetails.requirements.properties.response.recaptchaSiteKey.length === 0) {\n                this.displayNotification('error', this.$t('pages.selfservice.captchaError'));\n            } else {\n                setTimeout(() => {\n                    if (typeof window.grecaptcha === 'undefined') {\n                        this.loadRecaptcha();\n                    } else {\n                        window.grecaptcha.render('recaptchaContainer', {\n                            sitekey: this.selfServiceDetails.requirements.properties.response.recaptchaSiteKey,\n                            callback: this.handleCaptchaCallback\n                        });\n                    }\n                }, 500);\n            }\n        },\n        handleCaptchaCallback (response) {\n            this.recaptchaResponse = response;\n            /* istanbul ignore next */\n            if (this.$listeners.advanceStage) {\n                this.$emit('advanceStage', this.getData());\n            }\n        },\n        getData () {\n            return {\n                response: this.recaptchaResponse,\n                'g-recaptcha-response': this.recaptchaResponse\n            };\n        }\n    }\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Captcha.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Captcha.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Captcha.vue?vue&type=template&id=470a1ede&\"\nimport script from \"./Captcha.vue?vue&type=script&lang=js&\"\nexport * from \"./Captcha.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._l((_vm.displayDetails),function(field,index){return [((field.type === 'string' || field.type === 'number'))?_c('b-form-group',{key:'genericField' +index,attrs:{\"label\":_vm._f(\"startCase\")(field.key),\"label-for\":\"field.key\",\"horizontal\":\"\"}},[(field.type === 'string')?_c('b-form-input',{ref:index === 0 ? 'focusInput' : '',refInFor:true,attrs:{\"name\":field.key,\"placeholder\":field.text,\"type\":\"text\",\"autocomplete\":field.key},model:{value:(_vm.saveFields[field.key]),callback:function ($$v) {_vm.$set(_vm.saveFields, field.key, (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"saveFields[field.key]\"}}):_vm._e(),(field.type === 'number')?_c('b-form-input',{ref:index === 0 ? 'focusInput' : '',refInFor:true,attrs:{\"horizontal\":\"\",\"name\":field.key,\"type\":\"number\",\"autocomplete\":field.key},model:{value:(_vm.saveFields[field.key]),callback:function ($$v) {_vm.$set(_vm.saveFields, field.key, _vm._n($$v))},expression:\"saveFields[field.key]\"}}):_vm._e()],1):_vm._e(),(field.type === 'boolean')?_c('b-form-group',{key:'genericField' +index},[_c('div',{staticClass:\"form-row\"},[_c('label',{staticClass:\"col-form-label col-sm-3\",attrs:{\"for\":field.key}},[_vm._v(_vm._s(_vm._f(\"startCase\")(field.key)))]),_c('div',{staticClass:\"mr-auto\"},[_c('b-form-checkbox',{staticClass:\"fr-toggle-primary\",attrs:{\"switch\":\"\",\"size\":\"lg\"},model:{value:(_vm.saveFields[field.key]),callback:function ($$v) {_vm.$set(_vm.saveFields, field.key, $$v)},expression:\"saveFields[field.key]\"}},[_vm._v(\" \"+_vm._s(_vm.saveFields[field.key] ? _vm.$t('common.form.yes') : _vm.$t('common.form.no'))+\" \")])],1)])]):_vm._e()]}),_c('b-button',{staticClass:\"mt-4\",attrs:{\"block\":true,\"size\":\"lg\",\"variant\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\" \"+_vm._s(_vm.$t(\"common.form.submit\"))+\" \")])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n    <div>\n        <template v-for=\"(field, index) in displayDetails\">\n            <b-form-group :label=\"field.key | startCase\" label-for=\"field.key\" horizontal :key=\"'genericField' +index\" v-if=\"(field.type === 'string' || field.type === 'number')\">\n                <b-form-input  :ref=\"index === 0 ? 'focusInput' : ''\" v-if=\"field.type === 'string'\"\n                               :name=\"field.key\"\n                               :placeholder=\"field.text\"\n                               type=\"text\"\n                               :autocomplete=\"field.key\"\n                               v-model.trim=\"saveFields[field.key]\"></b-form-input>\n\n                <b-form-input horizontal :ref=\"index === 0 ? 'focusInput' : ''\" v-if=\"field.type === 'number'\"\n                              :name=\"field.key\"\n                              type=\"number\"\n                              :autocomplete=\"field.key\"\n                              v-model.number=\"saveFields[field.key]\"></b-form-input>\n            </b-form-group>\n\n            <!-- for boolean values -->\n            <b-form-group :key=\"'genericField' +index\" v-if=\"field.type === 'boolean'\">\n                <div class=\"form-row\">\n                    <label class=\"col-form-label col-sm-3\" :for=\"field.key\">{{field.key | startCase}}</label>\n                    <div class=\"mr-auto\">\n                        <b-form-checkbox\n                            switch\n                            size=\"lg\"\n                            class=\"fr-toggle-primary\"\n                            v-model=\"saveFields[field.key]\">\n                            {{ saveFields[field.key] ? $t('common.form.yes') : $t('common.form.no') }}\n                        </b-form-checkbox>\n                    </div>\n                </div>\n            </b-form-group>\n        </template>\n        <b-button @click=\"save\" class='mt-4' :block=\"true\" size=\"lg\" variant=\"primary\">\n            {{$t(\"common.form.submit\")}}\n        </b-button>\n    </div>\n</template>\n\n<script>\nimport _ from 'lodash';\n\n/**\n * @description Selfservice stage for multiple selfservice flows, attempts to auto generate a form for a user to fill out. Currently\n * generates only numbers, strings and boolean fields. This stage will only load when no other stage is found.\n *\n **/\nexport default {\n    name: 'Generic-Self-Service',\n    props: {\n        selfServiceDetails: { required: true }\n    },\n    data () {\n        let saveData = {},\n            displayDetails = [];\n\n        if (this.selfServiceDetails && this.selfServiceDetails.requirements && this.selfServiceDetails.requirements.properties) {\n            _.each(this.selfServiceDetails.requirements.properties, (prop, key) => {\n                displayDetails.push({\n                    type: prop.type,\n                    text: prop.description,\n                    key: key\n                });\n\n                if (prop.type === 'string') {\n                    saveData[key] = '';\n                } else if (prop.type === 'boolean') {\n                    saveData[key] = false;\n                } else {\n                    saveData[key] = null;\n                }\n            });\n        }\n\n        return {\n            saveFields: saveData,\n            displayDetails: displayDetails\n        };\n    },\n    methods: {\n        getData () {\n            return this.saveFields;\n        },\n\n        save () {\n            this.$emit('advanceStage', this.getData());\n        },\n\n        isValid () {\n            return Promise.resolve(true);\n        }\n    },\n    filters: {\n        startCase (value) {\n            return _.startCase(value);\n        }\n    }\n};\n</script>\n\n<style scoped></style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GenericSelfService.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GenericSelfService.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GenericSelfService.vue?vue&type=template&id=798fd6ea&scoped=true&\"\nimport script from \"./GenericSelfService.vue?vue&type=script&lang=js&\"\nexport * from \"./GenericSelfService.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"798fd6ea\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-form-group',{staticClass:\"mb-0\"},[_vm._t(\"input\",[_c('fr-floating-label-input',{attrs:{\"name\":\"password\",\"fieldName\":\"password\",\"type\":\"password\",\"label\":_vm.label || _vm.$t('common.placeholders.password'),\"reveal\":true,\"showErrorState\":false},on:{\"input\":function($event){return _vm.setFailingPolicies($event)}},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})]),_vm._t(\"policy-panel\",[_c('fr-policy-panel',{staticClass:\"mt-2\",attrs:{\"num-columns\":_vm.cols,\"policies\":_vm.policies,\"policy-failures\":_vm.failedPolicies}})])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-row',_vm._l((_vm.numColumns),function(i){return _c('b-col',{key:(\"password_policy_\" + i)},[_c('small',[_c('ul',{staticClass:\"pl-4 text-left\"},_vm._l((_vm.policyColumns[i-1]),function(policy){return _c('li',{key:policy.policyId,class:[{'fr-valid': !_vm.includes(_vm.policyFailures, policy.name)}, 'text-muted fr-policy-list-item']},[_vm._v(\" \"+_vm._s(_vm.$t((\"common.policyValidationMessages.\" + (policy.name)), policy.params))+\" \")])}),0)])])}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n  <b-row>\n    <b-col\n      v-for=\"i in numColumns\"\n      :key=\"`password_policy_${i}`\">\n      <small>\n        <ul class=\"pl-4 text-left\">\n          <li\n            v-for=\"(policy) in policyColumns[i-1]\"\n            :key=\"policy.policyId\"\n            :class=\"[{'fr-valid': !includes(policyFailures, policy.name)}, 'text-muted fr-policy-list-item']\">\n            {{ $t(`common.policyValidationMessages.${policy.name}`, policy.params) }}\n          </li>\n        </ul>\n      </small>\n    </b-col>\n  </b-row>\n</template>\n\n<script>\nimport {\n    includes\n} from 'lodash';\n\n/**\n * @description Part of the password policy component that displays the list of policy items required.\n * Shows failed policies in a normal text and passing policies in a light text.\n * */\nexport default {\n    name: 'PolicyPanel',\n    props: {\n    /**\n     * Number of columns to display. Policies are evenly distributed between columns.\n     */\n        numColumns: {\n            type: Number,\n            default: 1\n        },\n        /**\n     * Array of policy objects [{ name: POLICYNAME, params: { PARAMNAME: VALUE } }, ...]\n     */\n        policies: {\n            type: Array,\n            default: () => []\n        },\n        /**\n     * Array of failing policies. Must match a value for name in policies array. ['FAILED1', 'FAILED2', ...]\n     */\n        policyFailures: {\n            type: Array,\n            default: () => []\n        }\n    },\n    data () {\n        return {\n            policyColumns: []\n        };\n    },\n    computed: {\n        numPolicies () {\n            return this.policies.length;\n        }\n    },\n    methods: {\n        includes,\n        /**\n     * Given an array of policies and a number of columns, distribute policies evenly.\n     * @param {Object[]} policyList policies to be split\n     * @param {Number} numColumns number of columns to split into\n     * @return {Object[][]} Array of arrays indicating the policies in each column\n     */\n        getPolicyColumns (policyList, numColumns) {\n            const policyColumns = [],\n                numPolicies = policyList.length,\n                policiesPerColumn = Math.floor(numPolicies / numColumns),\n                remaining = (numPolicies % numColumns);\n            let curColumnIndex = 0;\n\n            // Split policies between columns\n            policyList.forEach((policy) => {\n                if (typeof policyColumns[curColumnIndex] === 'undefined') {\n                    policyColumns.push([]);\n                }\n                policyColumns[curColumnIndex].push({ name: policy.name, params: policy.params });\n                const limit = curColumnIndex < remaining ? (policiesPerColumn + 1) : policiesPerColumn;\n                if (policyColumns[curColumnIndex].length >= limit) {\n                    curColumnIndex += 1;\n                }\n            });\n            return policyColumns;\n        }\n    },\n    watch: {\n        policies: {\n            handler (value) {\n                this.policyColumns = this.getPolicyColumns(value, this.numColumns);\n            },\n            immediate: true\n        }\n    }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.fr-valid {\n  opacity: 0.5;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PolicyPanel.vue?vue&type=template&id=48905e4d&scoped=true&\"\nimport script from \"./PolicyPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./PolicyPanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PolicyPanel.vue?vue&type=style&index=0&id=48905e4d&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"48905e4d\",\n  null\n  \n)\n\nexport default component.exports","<!--\nCopyright (c) 2020 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n  <b-form-group class=\"mb-0\">\n    <slot name=\"input\">\n        <fr-floating-label-input\n            name=\"password\"\n            fieldName=\"password\"\n            type=\"password\"\n            v-model=\"password\"\n            :label=\"label || $t('common.placeholders.password')\"\n            :reveal=\"true\"\n            :showErrorState=\"false\"\n            @input=\"setFailingPolicies($event)\" />\n    </slot>\n    <slot name=\"policy-panel\">\n      <fr-policy-panel\n        class=\"mt-2\"\n        :num-columns=\"cols\"\n        :policies=\"policies\"\n        :policy-failures=\"failedPolicies\" />\n    </slot>\n  </b-form-group>\n</template>\n\n<script>\nimport {\n    at,\n    curry,\n    first,\n    flatten,\n    head,\n    includes,\n    isEmpty,\n    isObject,\n    isString,\n    isUndefined,\n    reject,\n    debounce\n} from 'lodash';\nimport FloatingLabelInput from './FloatingLabelInput';\nimport PolicyPanel from './PolicyPanel';\n\n/**\n * The main display for the password policy component. Connects a text field to check policy on input to see if password correctly matches configured policy (makes use of policy.json)\n *\n * @fires POST /policy/selfservice/registration/?_action=validateObject - Submits an object in its current state to policy for validation against the configured policy\n */\nexport default {\n    name: 'PolicyPasswordInput',\n    components: {\n        'fr-floating-label-input': FloatingLabelInput,\n        'fr-policy-panel': PolicyPanel\n    },\n    props: {\n        /**\n         * Items to remove from the policy service.\n         */\n        excludeOverwrite: {\n            required: false,\n            type: Array,\n            default: null\n        },\n        cols: {\n            type: Number,\n            default: 2\n        },\n        /**\n         * Failed policies not shown in policy panel\n         */\n        failed: {\n            type: Array,\n            default: () => []\n        },\n        userPolicyObject: {\n            type: Boolean,\n            default: false\n        },\n        /**\n         * Floating label for input\n         */\n        label: {\n            type: String,\n            default () {\n                return this.$t('common.placeholders.password');\n            }\n        },\n        /**\n         * Required policy API used to validate input password.\n         */\n        policyApi: {\n            required: true,\n            type: String\n        },\n        value: {\n            type: [String, Object],\n            default () {\n                return '';\n            }\n        }\n    },\n    data () {\n        return {\n            failedPolicies: [],\n            password: this.value,\n            policies: [],\n            policyService: () => {},\n            serverFailures: []\n        };\n    },\n    watch: {\n        failed: {\n            handler (newVal) {\n                this.serverFailures = this.getFailedPolicyMessages(newVal);\n            },\n            deep: true,\n            immediate: true\n        },\n        failedPolicies (newVal) {\n            this.$emit('valid', newVal.length === 0);\n        },\n        password (newVal) {\n            this.$emit('input', newVal);\n        },\n        value () {\n            this.password = this.value;\n        }\n    },\n    computed: {\n        exclude () {\n            if (this.excludeOverwrite) {\n                return this.excludeOverwrite;\n            }\n            return [\n                {\n                    name: 'REQUIRED',\n                    predicate (policyRequirements) {\n                        return includes(policyRequirements, 'REQUIRED') && includes(policyRequirements, 'MIN_LENGTH');\n                    }\n                },\n                {\n                    name: 'IS_NEW',\n                    predicate () {\n                        return this.policyApi === 'selfservice/registration';\n                    }\n                },\n                'VALID_TYPE',\n                'CANNOT_CONTAIN_OTHERS'\n            ];\n        }\n    },\n    methods: {\n        /**\n         * Predicates whether item matches 'password'. Policy Definition and Policy Failure objects\n         * have different shapes, so this function can be used as a predicate for both.\n         * @param {String} propName - The name of the property grab\n         * @param {Object} policyRequirementItem - object to predicate on\n         * @return {Boolean}\n         */\n        isPasswordPolicyItem: curry((propName, policyRequirementItem) => !isEmpty(policyRequirementItem[propName].match('password'))),\n\n        /**\n         * convert policy definition into a simple structure to work with\n         * @param {Object} policyDefinition\n         * @param {String[]} policyDefinition.policyRequirements - singleton array with policy name\n         * @param {Object} policyDefinition.params - object containing params for policy (e.g. `{ params: { numNum: 1 } }\n         * @return {Object} - {name<String>, params<Object>}\n         */\n        toSimplePolicyObject (policyDefinition) {\n            const { policyRequirements, params } = policyDefinition,\n                name = first(policyRequirements);\n\n            return !isUndefined(name) ? { name, params } : {};\n        },\n        /**\n         * Change an array of Failed Policy objects to an array of policy names\n         * @param {Object} failedPolicySet - policy service response object\n         * @param {Object[]} failedPolicySet.failedPolicyRequirements - the list to map\n         * @return {String[]}\n         */\n        toPolicyNames (failedPolicySet) {\n            const failedPolicyRequirements = failedPolicySet.failedPolicyRequirements || [],\n                policyNames = failedPolicyRequirements\n                    .filter(this.isPasswordPolicyItem('property'))\n                    .map((failedPolicyDefinition) => at(failedPolicyDefinition, ['policyRequirements[0].policyRequirement']));\n\n            return flatten(policyNames);\n        },\n        /**\n         * Remove from the policy service return set of policies those that are defined in the `exclude` prop\n         * @param {Object} policyRequirementSet - policy service response object\n         * @param {String[]} policy names and predicates to exclude\n         * @return {Object} - edited version of the policyRequirementSet\n         */\n        makeExclusions (policyRequirementSet, exclude) {\n            const policyRequirements = (policyRequirementSet && policyRequirementSet.policyRequirements) ? policyRequirementSet.policyRequirements : [];\n            let policies = (policyRequirementSet && policyRequirementSet.policies) ? policyRequirementSet.policies : [];\n\n            // eslint-disable-next-line one-var\n            const rejectPolicy = (requirement) => reject(policies, (policy) => first(policy.policyRequirements) === requirement);\n\n            exclude.forEach((exclusion) => {\n                if (isObject(exclusion)) {\n                    if (exclusion.predicate(policyRequirements)) {\n                        policies = rejectPolicy(exclusion.name);\n                    }\n                } else if (isString(exclusion)) {\n                    if (includes(policyRequirements, exclusion)) {\n                        policies = rejectPolicy(exclusion);\n                    }\n                }\n            });\n\n            return Object.assign({}, policyRequirementSet, { policyRequirements, policies });\n        },\n        /**\n         * Get an array of error message strings given an array of failing policy objects.\n         * These are used to display the failing policies that are returned after submitting a password.\n         * @param {Object[]} failed Array of failing policy objects\n         * @return {String[]} Array of translated error messages\n         */\n        getFailedPolicyMessages (failed) {\n            if (failed.length === 0) {\n                return [];\n            }\n            return this.failed.map((policy) => {\n                const name = policy.policyRequirements[0].policyRequirement,\n                    param = policy.policyRequirements[0].params;\n                return this.$t(`common.policyValidationMessages.${name}`, param);\n            });\n        },\n        /**\n         * validates a value for as-you-type feedback.\n         * @param {String} password a string to validate against relevant policy\n         */\n        setFailingPolicies: debounce(function (password) {\n            let sentPassword = { password };\n\n            if (this.policyApi.match('registration')) {\n                sentPassword = { user: { password: this.password } };\n            }\n\n            this.policyService.post(`/policy/${this.policyApi}/?_action=validateObject`, sentPassword)\n                .then(({ data }) => { this.failedPolicies = this.toPolicyNames(data); this.serverFailures = []; })\n                .catch(() => {\n                    this.displayNotification('IDMMessages', 'error', this.$t('common.policyValidationMessages.policyServiceError.policyApi', { policyApi: this.policyApi }));\n                });\n        }, 200)\n    },\n    created () {\n    // Initialize the policy service to be used in validation calls and the preliminary get call.\n        const headers = this.getAnonymousHeaders();\n        this.policyService = this.getRequestService({ headers });\n\n        // Get the initial policy list from the policy service.\n        this.policyService.get(`/policy/${this.policyApi}`)\n            .then(({ data }) => head(data.properties.filter(this.isPasswordPolicyItem('name'))))\n            .then((policyRequirementSet) => this.makeExclusions(policyRequirementSet, this.exclude))\n            .then(({ policies }) => {\n                this.policies = policies\n                    .map(this.toSimplePolicyObject)\n                    .filter((p) => !isEmpty(p));\n            })\n            .catch(() => {\n                this.displayNotification('IDMMessages', 'error', this.$t('common.policyValidationMessages.policyServiceError.policyApi', { policyApi: this.policyApi }));\n                this.$router.push('/login');\n            });\n\n        this.setFailingPolicies(this.password);\n    }\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyPasswordInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyPasswordInput.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PolicyPasswordInput.vue?vue&type=template&id=4c9cb7d0&\"\nimport script from \"./PolicyPasswordInput.vue?vue&type=script&lang=js&\"\nexport * from \"./PolicyPasswordInput.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PolicyPanel.vue?vue&type=style&index=0&id=48905e4d&lang=scss&scoped=true&\""],"sourceRoot":""}