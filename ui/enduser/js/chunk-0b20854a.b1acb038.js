/*!
 * Copyright 2019-2020 ForgeRock AS. All Rights Reserved 
 *  Use of this code requires a commercial software license with ForgeRock AS. or with one of its affiliates. All use shall be exclusively subject to such license between the licensee and ForgeRock AS.
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b20854a"],{"0199":function(t,e,a){},1420:function(t,e,a){"use strict";a("0199")},"31da":function(t,e,a){"use strict";a("da55")},5231:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-card",{staticClass:"mb-3",attrs:{"no-body":""}},[t._t("list-group-header",[a("b-card-body",{staticClass:"py-4"},[a("h5",{class:[{"mb-4":t.subtitle,"mb-0":!t.subtitle},"card-title"]},[t._v(t._s(t.title))]),t.subtitle?a("h6",{staticClass:"card-subtitle mb-0 text-muted"},[t._v(t._s(t.subtitle))]):t._e()])]),a("b-list-group",{attrs:{flush:""}},[t._t("default")],2)],2)},n=[],i={name:"List-Group",props:{title:{type:String},subtitle:{type:String}},data:function(){return{}}},l=i,o=(a("31da"),a("2877")),r=Object(o["a"])(l,s,n,!1,null,"9e56b7f4",null);e["a"]=r.exports},"545f":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("fr-list-group",{directives:[{name:"show",rawName:"v-show",value:t.mappings.length,expression:"mappings.length"}],attrs:{title:t.$t("pages.profile.consent.title"),subtitle:t.$t("pages.profile.consent.subtitle")}},t._l(t.mappings,(function(e){return a("fr-list-item",{key:e.name,attrs:{collapsible:e.consented,panelShown:!1}},[a("template",{staticClass:"overflow:hidden;",slot:"list-item-header"},[a("fr-fallback-image",{staticClass:"mr-3",attrs:{src:e.icon,width:"24",height:"24",alt:e.name,fallback:"fa-cog"}}),a("div",{staticClass:"media-body",staticStyle:{width:"100%"}},[a("div",{staticClass:"d-block"},[a("h6",{staticClass:"my-0"},[t._v(t._s(e.displayName))]),a("small",{staticClass:"text-muted"},[t._v(t._s(e.subTitle))])])]),a("div",{staticClass:"d-flex align-self-right"},[a("b-button",{attrs:{type:"button",variant:"link"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.showModal(e.name)}}},[t._v(" "+t._s(t.$t("pages.profile.consent."+(e.consented?"deny":"allow")))+" ")]),e.consented?a("div",{staticClass:"caret ml-2 my-auto"},[a("i",{staticClass:"fa fa-angle-down fa-lg pr-0 caret-down align-self-center"}),a("i",{staticClass:"fa fa-angle-up fa-lg pr-0 pt-1 caret-up align-self-center"})]):t._e()],1),a("b-modal",{ref:e.name,refInFor:!0,attrs:{id:e.name,size:"md","cancel-variant":"outline-secondary"}},[a("div",{staticClass:"d-flex w-100 h-100",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title align-self-center text-center"},[t._v(t._s(e.modalHeader))]),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.hideModal(e.name)}}},[a("i",{staticClass:"fa fa-times"})])]),a("b-container",[e.consented?a("p",{domProps:{innerHTML:t._s(t.$t("pages.profile.consent.confirmDeny",{mappingName:e.displayName}))}}):a("fr-access-level",{attrs:{fields:e.fields}})],1),a("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("div",{staticClass:"float-right"},[a("b-btn",{attrs:{variant:"outline-secondary mr-2"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.hideModal(e.name)}}},[t._v(t._s(t.$t("common.form.cancel")))]),a("b-btn",{attrs:{type:"button",variant:e.consented?"danger":"primary"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.toggleConsentAndHideModal(e)}}},[t._v(" "+t._s(t.$t("pages.profile.consent."+(e.consented?"deny":"allow")))+" ")])],1)])],1)],1),a("div",{attrs:{slot:"list-item-collapse-body"},slot:"list-item-collapse-body"},[a("fr-access-level",{attrs:{fields:e.fields}})],1)],2)})),1)},n=[],i=a("2ef0"),l=a.n(i),o=function(t,e){var a=e._c;return a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-xl-5 mb-3"},[e._v(e._s(e.parent.$t("pages.profile.consent.accountAccess")))]),a("dd",{staticClass:"col-xl-7 mb-4"},[a("ul",{staticClass:"list-unstyled text-muted"},e._l(e.props.fields,(function(t){return a("li",{key:t.name,staticClass:"py-1"},[a("i",{staticClass:"fa fa-check fa-fw text-success mr-2"}),e._v(e._s(t.title))])})),0)])])},r=[],c=a("2877"),d={},u=Object(c["a"])(d,o,r,!0,null,null,null),f=u.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.imageFound?a("b-img",{attrs:{src:t.src,width:t.width,height:t.width,alt:t.alt}}):a("span",{staticClass:"icon-holder p-2 d-flex bg-light border rounded"},[a("i",{class:["fa",t.fallback,"fa-lg text-dark mt-auto"]})])],1)},m=[],h=a("bc3a"),g=a.n(h),b={name:"Image-Fallback",props:["src","width","height","alt","fallback"],data:function(){return{imageFound:!1}},mounted:function(){var t=this;!l.a.isNull(this.src)&&!l.a.isUndefined(this.src)&&this.src.length>0?g.a.get("".concat(this.src)).then((function(e){var a=e.status;t.imageFound=200===a})).catch((function(e){e&&(t.imageFound=!1)})):this.imageFound=!1}},v=b,_=(a("1420"),Object(c["a"])(v,p,m,!1,null,"7f05d76e",null)),w=_.exports,C=a("5231"),y=a("9830"),$=a("c1df"),k=a.n($),M={name:"Consent",components:{"fr-list-group":C["a"],"fr-list-item":y["a"],"fr-access-level":f,"fr-fallback-image":w},props:["consentedMappings"],data:function(){return{consentableMappings:[]}},computed:{mappings:function(){var t=this;return this.consentableMappings.map((function(e){var a=l.a.find(t.consentedMappings,{mapping:e.name}),s="pages.profile.consent.";return e.showDetails=!1,l.a.isUndefined(a)?(e.consented=!1,s+="allowConsentHeader",e.subTitle=t.$t("pages.profile.consent.notAuthorized")):(e.consented=!0,e.consentDate=a.consentDate,s+="denyConsentHeader",e.subTitle="".concat(t.$t("pages.profile.consent.authorized")," ").concat(k()(e.consentDate).format("MMMM Do YYYY"))),e.modalHeader=t.$t(s),e}))}},created:function(){var t=this;this.getRequestService().get('consent?_queryFilter=/source eq "'.concat(this.$root.userStore.state.managedResource,'"')).then((function(e){var a=e.data;t.consentableMappings=a.result}))},methods:{showModal:function(t){l.a.first(this.$refs[t]).show()},toggleConsentAndHideModal:function(t){this.toggleConsent(t),this.hideModal(t.name)},hideModal:function(t){l.a.first(this.$refs[t]).hide()},generatePatch:function(t){var e,a=t.consentDate,s=t.name,n={consentDate:a,mapping:s},i="/consentedMappings";return t.consented?e="remove":(n.consentDate=(new Date).toISOString(),i+="/-",e="add"),[{field:i,operation:e,value:n}]},toggleConsent:function(t,e){this.$emit("updateProfile",this.generatePatch(t))}}},x=M,D=Object(c["a"])(x,s,n,!1,null,null,null);e["default"]=D.exports},"56a3":function(t,e,a){"use strict";a("7a6d")},"7a6d":function(t,e,a){},9830:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.collapsible?a("div",{staticClass:"collapsible"},[a("b-list-group-item",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:t.toggleId,expression:"toggleId"}],class:[{"list-item-cursor":!1===t.collapsible}],attrs:{href:"#"}},[a("div",{staticClass:"media"},[t._t("list-item-header")],2)]),a("b-collapse",{attrs:{id:t.id,visible:t.panelShown},on:{hide:function(e){return t.$emit("hide")},show:function(e){return t.$emit("show")},hidden:function(e){return t.$emit("hidden")},shown:function(e){return t.$emit("shown")}}},[a("b-card-body",{staticClass:"pt-3"},[t._t("list-item-collapse-body")],2)],1)],1):a("div",{class:[{"fr-hover-item":t.hoverItem}],on:{click:function(e){return t.$emit("row-click")}}},[a("b-list-group-item",{staticClass:"noncollapse"},[a("div",{staticClass:"media"},[t._t("list-item-header")],2)]),t.panelShown?a("b-card-body",{staticClass:"pt-3"},[t._t("list-item-collapse-body")],2):t._e()],1)},n=[],i={name:"List-Item",props:{collapsible:{type:Boolean,default:!1},panelShown:{type:Boolean,default:!1},hoverItem:{type:Boolean,default:!1}},data:function(){return{id:null}},beforeMount:function(){this.id="listItem"+this._uid},computed:{toggleId:function(){return this.collapsible?this.id:null}}},l=i,o=(a("56a3"),a("2877")),r=Object(o["a"])(l,s,n,!1,null,"03c581be",null);e["a"]=r.exports},da55:function(t,e,a){}}]);
//# sourceMappingURL=chunk-0b20854a.b1acb038.js.map