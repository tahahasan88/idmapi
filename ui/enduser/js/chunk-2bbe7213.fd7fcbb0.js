/*!
 * Copyright 2019-2020 ForgeRock AS. All Rights Reserved 
 *  Use of this code requires a commercial software license with ForgeRock AS. or with one of its affiliates. All use shall be exclusively subject to such license between the licensee and ForgeRock AS.
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2bbe7213"],{"1f6b":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return this.providers.length>0?i("div",[i("fr-list-group",{attrs:{title:t.$t("pages.profile.socialSignIn.title"),subtitle:t.$t("pages.profile.socialSignIn.subtitle")}},t._l(t.providers,(function(e,s){return i("fr-list-item",{key:s,attrs:{collapsible:void 0!==e._id,panelShown:!1,hoverItem:!0}},[i("div",{staticClass:"d-inline-flex w-100",attrs:{slot:"list-item-header"},slot:"list-item-header"},[i("div",{staticClass:"flex-grow-1"},[e.uiConfig.buttonImage?i("b-img",{staticClass:"mr-3",attrs:{src:"static/"+e.uiConfig.buttonImage,width:"24",height:"24"}}):i("span",{staticClass:"fr-social-icon mr-3 text-center",style:"background: "+e.uiConfig.iconBackground+"; color:"+e.uiConfig.iconFontColor+";"},["fa-cloud"===e.uiConfig.iconClass?i("i",{class:["fa",e.uiConfig.iconClass]}):i("i",{class:["fab",e.uiConfig.iconClass]})]),i("span",[t._v(t._s(e.uiConfig.buttonDisplayName))])],1),i("div",{staticClass:"float-right d-flex"},[i("a",{staticClass:"align-self-center flex-grow-2 text-right",attrs:{href:"#"}},[e._refResourceId?i("span",{on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.showModal(e.provider)}}},[t._v(t._s(t.$t("pages.profile.socialSignIn.disconnect")))]):i("span",{on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.connectProvider(e.provider)}}},[t._v(t._s(t.$t("pages.profile.socialSignIn.connect")))])]),e._id?i("div",{staticClass:"caret d-flex ml-3"},[i("i",{staticClass:"fa fa-angle-down fa-lg pr-0 caret-down align-self-center"}),i("i",{staticClass:"fa fa-angle-up fa-lg pr-0 pt-1 caret-up align-self-center"})]):t._e()])]),e._id?i("div",{attrs:{slot:"list-item-collapse-body"},slot:"list-item-collapse-body"},[i("fr-social-identity-panel",{attrs:{provider:e}})],1):t._e()])})),1),i("b-modal",{ref:"disconnectModal",attrs:{id:"showModal","cancel-variant":"outline-secondary"}},[i("div",{staticClass:"d-flex w-100 h-100",attrs:{slot:"modal-header"},slot:"modal-header"},[i("h5",{staticClass:"modal-title align-self-center text-center"},[t._v(t._s(t.$t("pages.profile.socialSignIn.disconnect"))+" "+t._s(t.disconnectedProvider))]),i("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:t.hideModal}},[i("i",{staticClass:"fa fa-times"})])]),i("b-container",[t._v(" "+t._s(t.$t("pages.profile.socialSignIn.disconnectConfirmMsg",{provider:t.disconnectedProvider}))+" ")]),i("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[i("div",{staticClass:"float-right"},[i("b-btn",{attrs:{variant:"outline-secondary mr-2"},on:{click:t.hideModal}},[t._v(t._s(t.$t("common.form.close")))]),i("b-btn",{attrs:{type:"button",variant:"danger"},on:{click:t.disconnectProvider}},[t._v(t._s(t.$t("pages.profile.socialSignIn.disconnect")))])],1)])],1)],1):t._e()},o=[],a=i("2ef0"),n=i.n(a),r=i("5231"),c=i("9830"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.showAccountDetails?i("div",{staticClass:"row mb-4"},[i("strong",{staticClass:"col fr-social-details-title"},[t._v(" "+t._s(t.$t("pages.profile.socialSignIn.linkedAccount"))+" ")]),i("div",{staticClass:"col-8"},[i("div",{staticClass:"media"},[i("b-img",{staticClass:"my-auto mr-3",attrs:{src:t.photoUrl,rounded:"circle",width:"40",height:"40",alt:"img"}}),i("div",{staticClass:"media-body"},[i("strong",{staticClass:"fr-social-details-title d-block mb-0"},[t._v(t._s(t.profile.displayName))]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.accountDisplayName,expression:"accountDisplayName"}],staticClass:"text-muted"},[t._v(t._s(t.accountDisplayName))])])],1)])]):t._e(),i("div",{staticClass:"row"},[i("strong",{staticClass:"col fr-social-details-title"},[t._v(" "+t._s(t.$t("pages.profile.socialSignIn.sharing"))+" ")]),i("div",{staticClass:"col-8 text-muted"},t._l(t.provider.scope,(function(e,s){return i("span",{key:"scopes-"+s,staticClass:"d-block py-1"},[i("i",{staticClass:"fa fa-check text-success mr-2"}),t._v(" "+t._s(t.capitalize(e))+" ")])})),0)])])},d=[],u={name:"Social-Identity-Panel",props:["provider"],data:function(){return{profile:{}}},created:function(){var t=this;this.getRequestService().post("identityProviders?_action=normalizeProfile",this.getProfileRequestPayload()).then((function(e){var i=e.data;t.profile=n.a.first(i)}))},methods:{getProfileRequestPayload:function(){var t=this,e=this.provider.propertyMap.reduce((function(e,i){return n.a.set(e,i.source,t.provider[i.source])}),{});return e._refResourceCollection=this.provider._refResourceCollection,{rawProfile:e}},capitalize:n.a.capitalize},computed:{showAccountDetails:function(){var t=!n.a.isEmpty(this.profile),e=n.a.has(this.profile,"displayName"),i=n.a.has(this.profile,"email")||n.a.has(this.profile,"username");return t&&(e||i)},photoUrl:function(){return this.profile.photoUrl||i("dfb4")},accountDisplayName:function(){return this.profile.email||this.profile.username}}},p=u,f=i("2877"),h=Object(f["a"])(p,l,d,!1,null,null,null),v=h.exports,g={name:"Social-Identities",components:{"fr-list-group":r["a"],"fr-list-item":c["a"],"fr-social-identity-panel":v},props:{clientToken:String,linkedProvider:String},data:function(){return{allAvailableProviders:[],connectedProviders:[],providers:[],toDisconnect:{}}},created:function(){var t=this;if(!n.a.isUndefined(this.clientToken)){var e=this.getRequestService();e.post("".concat(this.$root.userStore.state.managedResource,"/").concat(this.$root.userStore.state.userId,"?_action=bind&provider=").concat(this.linkedProvider),JSON.stringify(this.clientToken)).then((function(){t.getAllConnectedProviders(t.getRequestService({headers:t.getAnonymousHeaders()})),t.displayNotification("success","".concat(n.a.find(t.providers,{provider:t.linkedProvider}).uiConfig.buttonDisplayName," has been linked")),delete t.clientToken})).catch((function(e){t.displayNotification("error",e.response.data.message)}))}},mounted:function(){this.loadData()},computed:{disconnectedProvider:function(){var t=n.a.get(this.toDisconnect,"uiConfig.buttonDisplayName");return t||""}},methods:{loadData:function(){var t=this;this.providers=[];var e=this.getRequestService({headers:this.getAnonymousHeaders()});e.get("/identityProviders").then((function(i){t.allAvailableProviders=i.data.providers,t.getAllConnectedProviders(e)})).catch((function(e){t.displayNotification("error",e.response.data.message)}))},getAllConnectedProviders:function(t){var e=this;t.get("".concat(this.$root.userStore.state.managedResource,"/").concat(this.$root.userStore.state.userId,"?_fields=idps/*")).then((function(t){e.connectedProviders=t.data.idps,e.providers=e.setProviders()})).catch((function(t){e.displayNotification("error",t.response.data.message)}))},setProviders:function(){var t=this,e=[];return n.a.each(this.allAvailableProviders,(function(i){var s=!1;n.a.each(t.connectedProviders,(function(t){n.a.includes(t._refResourceCollection,i.provider)&&(s=!0,e.push(n.a.extend(t,i)))})),s||e.push(i)})),e},showModal:function(t){this.toDisconnect=n.a.find(this.providers,{provider:t}),this.$refs.disconnectModal.show()},hideModal:function(){this.toDisconnect={},this.$refs.disconnectModal.hide()},connectProvider:function(t){var e=this,i=this.getRequestService({headers:this.getAnonymousHeaders()});i.post("/identityProviders?_action=getAuthRedirect",{provider:t,landingPage:"".concat(window.location.protocol,"/#/").concat(window.location.host,"/login?_oauthReturn=true&provider=").concat(t,"&gotoURL=profile")}).then((function(e){localStorage.setItem("linkedProvider",btoa(t)),localStorage.setItem("dataStoreToken",btoa(e.data.token)),window.location.href=e.data.redirect})).catch((function(t){e.displayNotification("error",t.response.data.message)}))},disconnectProvider:function(){var t=this,e=this.getRequestService({headers:this.getAnonymousHeaders()});e.post("".concat(this.$root.userStore.state.managedResource,"/").concat(this.$root.userStore.state.userId,"?_action=unbind&provider=").concat(this.toDisconnect.provider)).then((function(){t.connectedProviders.splice(n.a.findIndex(t.connectedProviders,{provider:t.toDisconnect.provider}),1),t.providers=t.setProviders(),t.displayNotification("success","".concat(n.a.find(t.providers,{provider:t.toDisconnect.provider}).uiConfig.buttonDisplayName," has been unlinked")),t.hideModal()})).catch((function(e){t.displayNotification("error",t.$t(e.response.data.message)),t.hideModal()}))}}},m=g,b=(i("cba9"),Object(f["a"])(m,s,o,!1,null,"385c3124",null));e["default"]=b.exports},"31da":function(t,e,i){"use strict";i("da55")},5231:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-card",{staticClass:"mb-3",attrs:{"no-body":""}},[t._t("list-group-header",[i("b-card-body",{staticClass:"py-4"},[i("h5",{class:[{"mb-4":t.subtitle,"mb-0":!t.subtitle},"card-title"]},[t._v(t._s(t.title))]),t.subtitle?i("h6",{staticClass:"card-subtitle mb-0 text-muted"},[t._v(t._s(t.subtitle))]):t._e()])]),i("b-list-group",{attrs:{flush:""}},[t._t("default")],2)],2)},o=[],a={name:"List-Group",props:{title:{type:String},subtitle:{type:String}},data:function(){return{}}},n=a,r=(i("31da"),i("2877")),c=Object(r["a"])(n,s,o,!1,null,"9e56b7f4",null);e["a"]=c.exports},"56a3":function(t,e,i){"use strict";i("7a6d")},"7a6d":function(t,e,i){},9830:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.collapsible?i("div",{staticClass:"collapsible"},[i("b-list-group-item",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:t.toggleId,expression:"toggleId"}],class:[{"list-item-cursor":!1===t.collapsible}],attrs:{href:"#"}},[i("div",{staticClass:"media"},[t._t("list-item-header")],2)]),i("b-collapse",{attrs:{id:t.id,visible:t.panelShown},on:{hide:function(e){return t.$emit("hide")},show:function(e){return t.$emit("show")},hidden:function(e){return t.$emit("hidden")},shown:function(e){return t.$emit("shown")}}},[i("b-card-body",{staticClass:"pt-3"},[t._t("list-item-collapse-body")],2)],1)],1):i("div",{class:[{"fr-hover-item":t.hoverItem}],on:{click:function(e){return t.$emit("row-click")}}},[i("b-list-group-item",{staticClass:"noncollapse"},[i("div",{staticClass:"media"},[t._t("list-item-header")],2)]),t.panelShown?i("b-card-body",{staticClass:"pt-3"},[t._t("list-item-collapse-body")],2):t._e()],1)},o=[],a={name:"List-Item",props:{collapsible:{type:Boolean,default:!1},panelShown:{type:Boolean,default:!1},hoverItem:{type:Boolean,default:!1}},data:function(){return{id:null}},beforeMount:function(){this.id="listItem"+this._uid},computed:{toggleId:function(){return this.collapsible?this.id:null}}},n=a,r=(i("56a3"),i("2877")),c=Object(r["a"])(n,s,o,!1,null,"03c581be",null);e["a"]=c.exports},cba9:function(t,e,i){"use strict";i("df20")},da55:function(t,e,i){},df20:function(t,e,i){}}]);
//# sourceMappingURL=chunk-2bbe7213.fd7fcbb0.js.map